<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>날씨 어플리케이션</title>
</head>
<body>
    <h1>나의 날씨 기록</h1>
    <p>현재 위치: <span id="location"></span></p>
    <p>현재 날씨: <span id="weather"></span></p>
    <button id="getWeather">날씨 가져오기</button>

    <script>
        window.addEventListener('load', () => {
            const locationElement = document.getElementById('location');
            const weatherElement = document.getElementById('weather');
            const getWeatherButton = document.getElementById('getWeather');
            const weatherRecords = [];

            const API_KEY = '3e99d634fb9ad1813e1d57c72b95e513'; // 본인의 API 키로 변경하세요

            function getLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(showPosition);
                } else {
                    locationElement.textContent = "위치 정보를 지원하지 않는 브라우저입니다.";
                }
            }

            function showPosition(position) {
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;
                locationElement.textContent = `위도: ${latitude}, 경도: ${longitude}`;
                getWeather(latitude, longitude);
            }

            async function getWeather(latitude, longitude) {
                const apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${API_KEY}`;
                
                try {
                    const response = await fetch(apiUrl);
                    const data = await response.json();
                    
                    if (data.weather && data.weather.length > 0) {
                        const weatherInfo = `날씨: ${data.weather[0].description}, 온도: ${data.main.temp}°C`;
                        weatherElement.textContent = weatherInfo;
                        weatherRecords.push(weatherInfo);
                    } else {
                        weatherElement.textContent = '날씨 정보가 없습니다.';
                    }
                } catch (error) {
                    console.error('날씨 정보를 가져오는 중 오류가 발생했습니다:', error);
                    weatherElement.textContent = '날씨 정보를 가져오는 중 오류가 발생했습니다.';
                }
            }

            getWeatherButton.addEventListener('click', getLocation);
        });
    </script>
</body>
</html>
